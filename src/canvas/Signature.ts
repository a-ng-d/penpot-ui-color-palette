import { Board, Group } from '@penpot/plugin-types'
import { lang, locals } from '../content/locals'
import Tag from './Tag'

export default class Signature {
  private nodeInfo: Board | null
  private nodeLogotype: Board | null
  private nodeVector: Group | null
  private node: Board | null

  constructor() {
    this.nodeInfo = null
    this.nodeLogotype = null
    this.nodeVector = null
    this.node = null
  }

  makeNodeInfo = () => {
    // Base
    this.nodeInfo = penpot.createBoard()
    this.nodeInfo.name = '_info'
    this.nodeInfo.fills = []
    this.nodeInfo.horizontalSizing = 'auto'
    this.nodeInfo.verticalSizing = 'auto'

    // Layout
    const flex = this.nodeInfo.addFlexLayout()
    flex.dir = 'column'
    flex.horizontalSizing = 'fit-content'
    flex.verticalSizing = 'fit-content'
    flex.rowGap = 4

    // Insert
    this.nodeInfo.appendChild(
      new Tag({
        name: '_tagline',
        content: locals[lang].tagline,
        fontSize: 10,
      }).makeNodeTag()
    )
    this.nodeInfo.appendChild(
      new Tag({
        name: '_url',
        content: locals[lang].url,
        url: 'https://ui-color-palette.com',
      }).makeNodeTag()
    )

    return this.nodeInfo
  }

  makeNodeLogotype = () => {
    // Base
    this.nodeLogotype = penpot.createBoard()
    this.nodeLogotype.name = '_logotype'
    this.nodeLogotype.fills = [
      {
        fillColor: '#FFF',
        fillOpacity: 0.5,
      },
    ]
    this.nodeLogotype.strokes = [
      {
        strokeColor: '#000',
        strokeOpacity: 0.05,
      },
    ]
    this.nodeLogotype.borderRadius = 8
    this.nodeLogotype.horizontalSizing = 'auto'
    this.nodeLogotype.verticalSizing = 'auto'

    // Layout
    const flex = this.nodeLogotype.addFlexLayout()
    flex.dir = 'row'
    flex.horizontalSizing = 'fit-content'
    flex.verticalSizing = 'fit-content'
    flex.horizontalPadding = 8
    flex.verticalPadding = 4

    // Insert
    const vectorNode = this.makeNodeVector()
    if (vectorNode) this.nodeLogotype.appendChild(vectorNode)

    return this.nodeLogotype
  }

  makeNodeVector = () => {
    // Base
    const vectorNode =
      penpot.createShapeFromSvg(`<svg width="826" height="288" viewBox="0 0 826 288" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M220.072 267.4V176.12H238.216V182.616H242.36C243.704 180.003 245.757 177.987 248.52 176.568C251.283 175.075 254.344 174.328 257.704 174.328C263.229 174.328 268.045 175.821 272.152 178.808C276.259 181.72 279.432 185.901 281.672 191.352C283.912 196.728 285.032 203.112 285.032 210.504C285.032 217.971 283.912 224.429 281.672 229.88C279.432 235.256 276.259 239.437 272.152 242.424C268.045 245.336 263.229 246.792 257.704 246.792C254.344 246.792 251.283 246.045 248.52 244.552C245.757 243.059 243.704 241.043 242.36 238.504H238.216V267.4H220.072ZM252.328 230.664C257.107 230.664 260.84 228.909 263.528 225.4C266.216 221.816 267.56 216.851 267.56 210.504C267.56 204.157 266.216 199.229 263.528 195.72C260.84 192.211 257.107 190.456 252.328 190.456C247.475 190.456 243.704 192.248 241.016 195.832C238.328 199.341 236.984 204.269 236.984 210.616C236.984 216.963 238.328 221.891 241.016 225.4C243.704 228.909 247.475 230.664 252.328 230.664ZM346.654 201.432V214.984L330.19 217.448C327.801 217.821 325.934 218.68 324.59 220.024C323.321 221.293 322.686 222.899 322.686 224.84C322.686 226.931 323.358 228.611 324.702 229.88C326.121 231.075 328.137 231.672 330.75 231.672C333.513 231.672 335.977 231.075 338.142 229.88C340.382 228.685 342.137 227.117 343.406 225.176C344.75 223.16 345.422 220.957 345.422 218.568V201.32C345.422 197.512 344.414 194.637 342.398 192.696C340.457 190.68 337.47 189.672 333.438 189.672C330.75 189.672 328.361 190.12 326.27 191.016C324.179 191.912 322.499 193.219 321.23 194.936C319.961 196.579 319.102 198.595 318.654 200.984H301.182C301.705 195.384 303.347 190.568 306.11 186.536C308.873 182.504 312.569 179.405 317.198 177.24C321.902 175.075 327.353 173.992 333.55 173.992C343.107 173.992 350.425 176.232 355.502 180.712C360.579 185.117 363.118 191.539 363.118 199.976V245H345.422V238.168H341.278C339.934 240.931 337.993 243.059 335.454 244.552C332.915 245.971 329.63 246.68 325.598 246.68C321.417 246.68 317.721 245.859 314.51 244.216C311.299 242.499 308.798 240.147 307.006 237.16C305.214 234.099 304.318 230.589 304.318 226.632C304.318 220.584 306.185 215.693 309.918 211.96C313.726 208.227 319.177 205.8 326.27 204.68L346.654 201.432ZM390.916 150.024H429.332V228.872H449.492V245H390.916V228.872H411.188V166.152H390.916V150.024ZM485.354 203.336H523.546L517.61 210.056C517.61 203.261 516.415 198.147 514.026 194.712C511.711 191.277 508.164 189.56 503.386 189.56C498.532 189.56 494.836 191.389 492.298 195.048C489.834 198.632 488.602 203.672 488.602 210.168C488.602 217.187 489.834 222.525 492.298 226.184C494.762 229.768 498.607 231.56 503.834 231.56C506.82 231.56 509.434 230.888 511.674 229.544C513.988 228.125 515.967 226.147 517.61 223.608H535.082C533.588 228.611 531.348 232.867 528.362 236.376C525.375 239.885 521.754 242.573 517.498 244.44C513.316 246.232 508.612 247.128 503.386 247.128C496.666 247.128 490.879 245.672 486.026 242.76C481.247 239.848 477.551 235.629 474.938 230.104C472.399 224.579 471.13 217.933 471.13 210.168C471.13 202.776 472.436 196.392 475.05 191.016C477.738 185.565 481.508 181.384 486.362 178.472C491.215 175.485 496.89 173.992 503.386 173.992C509.732 173.992 515.146 175.411 519.626 178.248C524.106 181.085 527.54 185.192 529.93 190.568C532.394 195.869 533.626 202.365 533.626 210.056C533.626 211.251 533.551 212.371 533.402 213.416C533.327 214.461 533.252 215.432 533.178 216.328H485.354V203.336ZM585.839 158.312V176.12H615.967V192.248H585.839V221.032C585.839 224.317 586.437 226.819 587.631 228.536C588.826 230.179 590.581 231 592.895 231C595.285 231 597.226 229.992 598.719 227.976C600.213 225.96 601.407 222.675 602.303 218.12H618.319C617.871 227.528 615.407 234.733 610.927 239.736C606.522 244.664 600.362 247.128 592.447 247.128C584.458 247.128 578.335 244.888 574.079 240.408C569.823 235.928 567.695 229.507 567.695 221.144V192.248H554.815V176.12H567.695V158.312H585.839ZM669.861 158.312V176.12H699.989V192.248H669.861V221.032C669.861 224.317 670.459 226.819 671.653 228.536C672.848 230.179 674.603 231 676.917 231C679.307 231 681.248 229.992 682.741 227.976C684.235 225.96 685.429 222.675 686.325 218.12H702.341C701.893 227.528 699.429 234.733 694.949 239.736C690.544 244.664 684.384 247.128 676.469 247.128C668.48 247.128 662.357 244.888 658.101 240.408C653.845 235.928 651.717 229.507 651.717 221.144V192.248H638.837V176.12H651.717V158.312H669.861ZM737.419 203.336H775.611L769.675 210.056C769.675 203.261 768.481 198.147 766.091 194.712C763.777 191.277 760.23 189.56 755.451 189.56C750.598 189.56 746.902 191.389 744.363 195.048C741.899 198.632 740.667 203.672 740.667 210.168C740.667 217.187 741.899 222.525 744.363 226.184C746.827 229.768 750.673 231.56 755.899 231.56C758.886 231.56 761.499 230.888 763.739 229.544C766.054 228.125 768.033 226.147 769.675 223.608H787.147C785.654 228.611 783.414 232.867 780.427 236.376C777.441 239.885 773.819 242.573 769.563 244.44C765.382 246.232 760.678 247.128 755.451 247.128C748.731 247.128 742.945 245.672 738.091 242.76C733.313 239.848 729.617 235.629 727.003 230.104C724.465 224.579 723.195 217.933 723.195 210.168C723.195 202.776 724.502 196.392 727.115 191.016C729.803 185.565 733.574 181.384 738.427 178.472C743.281 175.485 748.955 173.992 755.451 173.992C761.798 173.992 767.211 175.411 771.691 178.248C776.171 181.085 779.606 185.192 781.995 190.568C784.459 195.869 785.691 202.365 785.691 210.056C785.691 211.251 785.617 212.371 785.467 213.416C785.393 214.461 785.318 215.432 785.243 216.328H737.419V203.336Z" fill="#00424F"/>
<path d="M252.104 135.128C245.459 135.128 239.635 133.672 234.632 130.76C229.704 127.773 225.896 123.592 223.208 118.216C220.595 112.765 219.288 106.344 219.288 98.952C219.288 91.336 220.632 84.8027 223.32 79.352C226.083 73.8267 229.965 69.5707 234.968 66.584C239.971 63.5227 245.869 61.992 252.664 61.992C258.787 61.992 264.088 63.2613 268.568 65.8C273.123 68.264 276.707 71.7733 279.32 76.328C281.933 80.8827 283.352 86.2587 283.576 92.456H267.336C266.365 87.9013 264.611 84.392 262.072 81.928C259.533 79.3893 256.36 78.12 252.552 78.12C247.624 78.12 243.741 79.9493 240.904 83.608C238.141 87.192 236.76 92.3067 236.76 98.952C236.76 105.299 238.104 110.227 240.792 113.736C243.555 117.245 247.325 119 252.104 119C255.464 119 258.301 117.955 260.616 115.864C263.005 113.773 264.76 110.824 265.88 107.016H282.232C281.784 112.765 280.216 117.768 277.528 122.024C274.915 126.205 271.405 129.453 267 131.768C262.669 134.008 257.704 135.128 252.104 135.128ZM334.222 135.128C327.502 135.128 321.678 133.635 316.75 130.648C311.822 127.661 308.014 123.443 305.326 117.992C302.638 112.541 301.294 106.083 301.294 98.616C301.294 91.0747 302.638 84.5787 305.326 79.128C308.014 73.6773 311.822 69.4587 316.75 66.472C321.678 63.4853 327.502 61.992 334.222 61.992C340.942 61.992 346.766 63.4853 351.694 66.472C356.622 69.4587 360.43 73.6773 363.118 79.128C365.806 84.5787 367.15 91.0747 367.15 98.616C367.15 106.083 365.806 112.541 363.118 117.992C360.43 123.443 356.622 127.661 351.694 130.648C346.841 133.635 341.017 135.128 334.222 135.128ZM334.222 119C339.15 119 342.958 117.208 345.646 113.624C348.334 110.04 349.678 105.037 349.678 98.616C349.678 92.12 348.334 87.08 345.646 83.496C342.958 79.912 339.15 78.12 334.222 78.12C329.369 78.12 325.561 79.912 322.798 83.496C320.11 87.08 318.766 92.12 318.766 98.616C318.766 105.037 320.11 110.04 322.798 113.624C325.561 117.208 329.369 119 334.222 119ZM390.916 38.024H429.332V116.872H449.492V133H390.916V116.872H411.188V54.152H390.916V38.024ZM502.266 135.128C495.546 135.128 489.722 133.635 484.794 130.648C479.866 127.661 476.058 123.443 473.37 117.992C470.682 112.541 469.338 106.083 469.338 98.616C469.338 91.0747 470.682 84.5787 473.37 79.128C476.058 73.6773 479.866 69.4587 484.794 66.472C489.722 63.4853 495.546 61.992 502.266 61.992C508.986 61.992 514.81 63.4853 519.738 66.472C524.666 69.4587 528.474 73.6773 531.162 79.128C533.85 84.5787 535.194 91.0747 535.194 98.616C535.194 106.083 533.85 112.541 531.162 117.992C528.474 123.443 524.666 127.661 519.738 130.648C514.884 133.635 509.06 135.128 502.266 135.128ZM502.266 119C507.194 119 511.002 117.208 513.69 113.624C516.378 110.04 517.722 105.037 517.722 98.616C517.722 92.12 516.378 87.08 513.69 83.496C511.002 79.912 507.194 78.12 502.266 78.12C497.412 78.12 493.604 79.912 490.842 83.496C488.154 87.08 486.81 92.12 486.81 98.616C486.81 105.037 488.154 110.04 490.842 113.624C493.604 117.208 497.412 119 502.266 119ZM555.823 64.12H585.503V70.392H589.647C590.917 67.7787 592.783 65.7627 595.247 64.344C597.786 62.8507 600.623 62.104 603.759 62.104C609.21 62.104 613.317 64.1947 616.08 68.376C618.917 72.4827 620.335 78.568 620.335 86.632V97.72H601.855V88.984C601.855 82.712 599.541 79.576 594.911 79.576C591.925 79.576 589.722 80.92 588.303 83.608C586.885 86.296 586.175 90.4027 586.175 95.928V116.872H605.663V133H557.167V116.872H568.703V80.248H555.823V64.12Z" fill="#00424F"/>
<path d="M100.432 64.12V133H82.288V126.728H78.144C76.6507 129.416 74.56 131.507 71.872 133C69.184 134.419 66.0853 135.128 62.576 135.128C58.0213 135.128 54.1387 134.045 50.928 131.88C47.7173 129.715 45.2533 126.616 43.536 122.584C41.8187 118.477 40.96 113.549 40.96 107.8V64.12H59.104V103.432C59.104 108.285 60.0747 111.981 62.016 114.52C63.9573 116.984 66.832 118.216 70.64 118.216C74.5227 118.216 77.4347 116.984 79.376 114.52C81.3173 111.981 82.288 108.285 82.288 103.432V64.12H100.432ZM129.91 64.12H168.214V116.872H188.486V133H129.91V116.872H150.07V80.248H129.91V64.12ZM158.246 55.944C154.587 55.944 151.75 55.0107 149.734 53.144C147.718 51.2773 146.71 48.6267 146.71 45.192C146.71 41.7573 147.718 39.1067 149.734 37.24C151.75 35.3733 154.587 34.44 158.246 34.44C161.979 34.44 164.817 35.3733 166.758 37.24C168.774 39.1067 169.782 41.7573 169.782 45.192C169.782 48.6267 168.774 51.2773 166.758 53.144C164.817 55.0107 161.979 55.944 158.246 55.944Z" fill="#00424F"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M678.571 24C664.959 24 654 35.1451 654 48.8V111.2C654 124.855 664.959 136 678.571 136H733.429C747.041 136 758 124.855 758 111.2V48.8C758 35.1451 747.041 24 733.429 24H678.571ZM662 48.8C662 39.4798 669.461 32 678.571 32H688V52C684.686 52 682 54.6863 682 58V62H662V48.8ZM682 66H662V94H682V66ZM682 98H662V111.2C662 120.52 669.461 128 678.571 128H688V108C684.686 108 682 105.314 682 102V98ZM692 108V128H720V108H692ZM692 52H720V32H692V52ZM724 52C727.314 52 730 54.6863 730 58V62H750V48.8C750 39.4798 742.539 32 733.429 32H724V52ZM730 66V94H750V66H730ZM730 98V102C730 105.314 727.314 108 724 108V128H733.429C742.539 128 750 120.52 750 111.2V98H730Z" fill="#00424F"/>
</svg>
`)
    if (!vectorNode) return null
    this.nodeVector = vectorNode
    this.nodeVector.name = '_vector'

    this.nodeVector.resize(165.2, 57.6)

    return this.nodeVector
  }

  makeNode = () => {
    // Base
    this.node = penpot.createBoard()
    this.node.name = '_signature'
    this.node.fills = []
    this.node.horizontalSizing = 'fix'
    this.node.verticalSizing = 'auto'

    // Layout
    const flex = this.node.addFlexLayout()
    flex.dir = 'row'
    flex.verticalSizing = 'fit-content'
    flex.justifyContent = 'space-between'

    // Insert
    this.node.appendChild(this.makeNodeInfo())
    this.node.appendChild(this.makeNodeLogotype())

    return this.node
  }
}
